:root {
  --m3-primary: #FF8A65;
  --m3-on-primary: #FFFFFF;
  --m3-primary-container: #FFD6CC;
  --m3-on-primary-container: #5F1E0E;
  --m3-secondary: #FFC2AE;
  --m3-on-secondary: #3D1C14;
  --m3-secondary-container: #FFE6DE;
  --m3-on-secondary-container: #3D1C14;
  --m3-tertiary: #FFB59E;
  --m3-on-tertiary: #351A14;
  --m3-surface: #FFF8F6;
  --m3-surface-2: #FFF3F0;
  --m3-on-surface: #211A18;
  --m3-surface-variant: #F3DED7;
  --m3-on-surface-variant: #53433F;
  --m3-outline: #8A766F;
  --m3-outline-variant: #E2CCC4;
  --radius-l: 22px;
  --radius-m: 16px;
  --radius-s: 12px;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.08);
  --shadow-lg: 0 12px 32px rgba(0,0,0,.12);
  --easing: cubic-bezier(.2,.8,.2,1);
  --easing-bouncy: cubic-bezier(.2, 1.1, .2, 1);
}

body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  color: var(--m3-on-surface);
  background: linear-gradient(180deg,var(--m3-surface) 0%, var(--m3-surface-2) 100%);
}

/* App Bar */
.appbar { position: sticky; top: 0; z-index: 100; background: var(--m3-surface); border-bottom: 1px solid var(--m3-outline-variant); }
.appbar-inner { display: flex; align-items: center; padding: 12px 14px; max-width: 1100px; margin: auto; }
.nav-btn { background: none; border: none; cursor: pointer; border-radius: 50%; width: 44px; height: 44px; display: grid; place-items: center; }
.nav-btn:hover { background: var(--m3-secondary-container); }
.title { font-weight: 800; font-size: 1.05rem; }
.spacer { flex: 1; }

/* Drawer */
.drawer { position: fixed; inset: 0; z-index: 200; display: grid; grid-template-columns: min(86vw, 320px) 1fr; opacity: 0; pointer-events: none; transition: opacity .35s var(--easing); }
.drawer.open { opacity: 1; pointer-events: auto; }
.panel { background: var(--m3-surface); border-right: 1px solid var(--m3-outline-variant); transform: translateX(-20px); transition: transform .4s var(--easing-bouncy); }
.drawer.open .panel { transform: translateX(0); }
.scrim { background: rgba(0,0,0,.28); }
.nav-list { padding: 18px; display: flex; flex-direction: column; gap: 8px; }
.nav-link { padding: 12px 14px; border-radius: 12px; color: var(--m3-on-surface); text-decoration: none; font-weight: 600; }
.nav-link:hover { background: var(--m3-secondary-container); }
.nav-link.active { background: var(--m3-primary-container); color: var(--m3-on-primary-container); }

/* Secondary progress bar above app bar */
.secondary-progress {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: var(--m3-surface-variant);
  transform: translateY(-100%);
  transition: transform 0.25s var(--easing);
  z-index: 110; /* was 90, now above app bar */
}
.secondary-progress.show {
  transform: translateY(0);
}
.secondary-progress .bar-fill {
  height: 100%;
  background: linear-gradient(90deg,var(--m3-primary), var(--m3-tertiary));
  transition: width .25s var(--easing);
}

/* Selected option highlight */
/* Highlight selected option before submitting */
.opt.selected {
  background: var(--m3-primary-container);
  border-color: var(--m3-primary);
}

/* Layout */
.wrap { max-width: 960px; margin: auto; padding: 16px; }
.header-card { background: var(--m3-surface); border-radius: var(--radius-l); padding: 18px; box-shadow: var(--shadow); border: 1px solid var(--m3-outline-variant); }
.page-title { font-size: 1.8rem; font-weight: 900; background: linear-gradient(90deg,var(--m3-primary), var(--m3-tertiary)); -webkit-background-clip: text; color: transparent; }
.page-sub { color: var(--m3-on-surface-variant); }
.progress { display: flex; align-items: center; gap: 12px; margin-top: 8px; }
.bar { flex: 1; height: 10px; background: var(--m3-surface-variant); border-radius: 999px; overflow: hidden; }
.bar-fill { height: 100%; background: linear-gradient(90deg,var(--m3-primary), var(--m3-tertiary)); transition: width .25s var(--easing); }
.score-badge { background: var(--m3-primary-container); padding: 6px 10px; border-radius: 999px; }

/* Quiz */
.list { display: grid; gap: 16px; margin-top: 16px; }
.card { background: var(--m3-surface); border-radius: var(--radius-m); padding: 16px; box-shadow: var(--shadow); border: 1px solid var(--m3-outline-variant); }
.q { font-weight: 800; margin-bottom: 8px; }
.options { display: grid; gap: 10px; }
.opt { display: flex; align-items: center; gap: 12px; background: var(--m3-surface-2); padding: 12px; border-radius: 14px; border: 1px solid var(--m3-outline-variant); cursor: pointer; transition: transform .22s var(--easing-bouncy); }
.opt:hover { transform: translateY(-1px); box-shadow: var(--shadow); }
.opt input { display: none; }
.opt .material-symbols-rounded { font-size: 20px; display: none; }
.opt.correct .material-symbols-rounded.check { color: var(--m3-primary); display: inline-block; animation: pop .25s var(--easing-bouncy); }
.opt.wrong .material-symbols-rounded.close { color: #D24B3B; display: inline-block; animation: pop .25s var(--easing-bouncy); }

/* Action Bar */
.actionbar { position: sticky; bottom: 0; margin-top: 16px; padding-bottom: 12px; }
.action-inner { display: flex; gap: 10px; justify-content: space-between; background: var(--m3-surface); border-radius: 18px; padding: 10px; box-shadow: var(--shadow); }
.btn { padding: 12px 18px; border-radius: 999px; border: none; font-weight: 800; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: opacity .2s; }
.btn[disabled] { opacity: 0.5; cursor: not-allowed; }
.btn-primary { background: var(--m3-primary); color: var(--m3-on-primary); }
.btn-tonal { background: var(--m3-primary-container); color: var(--m3-on-primary-container); }

@keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 60% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
.compliment-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1.25rem;
  padding: 1.5rem;
  text-align: left;
}

.compliment-icon {
  font-size: 2.5rem;
  color: var(--m3-primary);
}

.animate-in {
  animation: fadeSlideIn 0.45s var(--easing);
}

@keyframes fadeSlideIn {
  0% { opacity: 0; transform: translateY(8px) scale(0.98); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* FAB for mobile */
.fab {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  background: var(--m3-primary);
  color: var(--m3-on-primary);
  border: none;
  border-radius: 50%;
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--m3-elevation-3);
  cursor: pointer;
  overflow: hidden;
}

.fab:hover {
  box-shadow: var(--m3-elevation-4);
}

/* Ripple effect */
.fab .ripple {
  position: absolute;
  border-radius: 50%;
  background: rgba(255,255,255,0.4);
  transform: scale(0);
  animation: ripple 0.6s linear;
}

@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}
